import React from 'react';
import styles from './WarningPage.module.css';

function angleBetweenTwoPoints(circleX, circleY, pointX, pointY) {
  return (Math.atan2(pointY - circleY, pointX - circleX) * 180) / Math.PI;
}

export function WarningPage() {
  const [isWarned, setIsWarned] = React.useState(true);
  const leftEyeRef = React.useRef();
  const rightEyeRef = React.useRef();
  const [leftEyeAngle, setLeftEyeAngle] = React.useState(0);
  const [rightEyeAngle, setRightEyeAngle] = React.useState(0);
  React.useEffect(() => {
    function handler(event) {
      if (leftEyeRef.current && isWarned) {
        const leftEyeBox = leftEyeRef.current.getBoundingClientRect();
        const rightEyeBox = rightEyeRef.current.getBoundingClientRect();

        setLeftEyeAngle(
          angleBetweenTwoPoints(
            leftEyeBox.x,
            leftEyeBox.y,
            event.clientX,
            event.clientY
          )
        );
        setRightEyeAngle(
          angleBetweenTwoPoints(
            rightEyeBox.x,
            rightEyeBox.y,
            event.clientX,
            event.clientY
          )
        );
      }

      window.addEventListener('mousemove', handler);
    }

    return () => {
      window.removeEventListener('mousemove', handler);
    };
  }, []);
  return (
    isWarned && (
      <div className={styles.contentSection}>
        <div className={styles.imgContainer}>
          <svg x="0px" y="0px" width="300" viewBox="0 0 291.8 300">
            <defs>
              <radialGradient
                id="radial-gradient"
                cx="130.1202"
                cy="297.0909"
                r="116.3345"
                gradientTransform="matrix(1 0 0 6.408018e-02 0 278.0533)"
                gradientUnits="userSpaceOnUse"
              >
                <stop offset="0" stopColor="#010101" stopOpacity="0.5" />
                <stop offset="1" stopColor="#1d1d1b" stopOpacity="0" />
              </radialGradient>
            </defs>
            <ellipse
              fill="url(#radial-gradient)"
              cx="130.1"
              cy="297.1"
              rx="119.7"
              ry="8.5"
            />
            <g className={styles.cat}>
              <path
                fill="#BA6C27"
                d="M90.9,233.9c-24.5,18.5-3.5,64.6,20.7,63.2h31.5c1.2-5.1-6.8-15.5-16-18.1
		C142.2,253.2,105.6,222.8,90.9,233.9L90.9,233.9z"
              />
              <path
                fill="#E89954"
                d="M74.1,242.7c-32.7,8.8-44.6-38.3-33.9-61.4c2.5-5.5,8.1-10.8,11.8-15.5c9.5-12,19-27.9-0.8-30.8
		c-14.5-2.2-44.6,26.5-34.5,71.9c10.1,45.3,36.8,53,36.8,53S65.3,260.1,74.1,242.7z"
              />
              <path
                fill="#BA6C27"
                d="M155.6,213c-1.5,14,1.5,30.8,3.7,53.9c2.5,26.8,2.3,30.2,2.3,30.2h35.8c1.2-5.1-3.6-17.3-12.8-19.9
		c4.1-21.9,19.4-70.4,20-81.3C206.2,168.6,158.9,183,155.6,213L155.6,213z"
              />
              <g>
                <path
                  fill="#E89954"
                  d="M124.3,165.3c-16.4,39.7-25.4,37.4-52.4,56.1c-24.5,17.1-25.2,45.3-3.1,56.3
			c31.6,15.6,74.5,17.7,114.2-28.9s34.2-94.4,29.8-100.6C208.6,141.8,124.3,165.3,124.3,165.3L124.3,165.3z"
                />
                <g>
                  <path
                    fill="#C46818"
                    d="M116.2,177.2c-1.8,4.1-4.1,8.1-6.6,11.8c3.7,5.1,9.1,9.4,16.6,10.5C145.5,202.7,120.8,193.5,116.2,177.2z
				 M106.1,193.4c-3.3,3.6-7,6.8-11.1,9.5c3.3,6.1,8.7,10.9,15.2,13.3C130.2,223.8,111,210.9,106.1,193.4L106.1,193.4z M90.1,206
				c-3,1.9-6.4,3.8-10.2,6.1c1.9,6.5,5.8,12.8,13.1,16.5C109.5,236.8,91.4,222.3,90.1,206z"
                  />
                </g>
              </g>
              <path
                fill="#CF7F3A"
                d="M124.3,165.3c-3,7.2-3.1,7.9-5.5,12.9c15.6,8,62.9,17.6,96.7-2.2c1.1-14.3-1.5-25.3-2.5-27.9
		C211.7,145.4,124.3,165.3,124.3,165.3z"
              />
              <path
                fill="#CF7F3A"
                d="M63,269.9c1.6,2.8,3.6,5.4,5.8,7.7c24.5,25.5,74.5,17.7,114.2-28.9c9.9-11.5,18-24.6,23.8-38.6
		c-17.4,24.8-53.2,57.1-122.7,56.5C74.8,266.5,67.9,267.7,63,269.9L63,269.9z"
              />
              <path
                fill="#E89954"
                d="M61.7,233.9c-24.5,18.5-3.5,64.6,20.7,63.2h31.5c1.2-5.1-6.8-15.5-16-18.1C113,253.2,76.4,222.8,61.7,233.9
		z"
              />
              <path
                fill="#E89954"
                d="M134.1,213c-0.2,14,4.5,30.8,8.8,53.9c5.1,26.8,5.2,30.2,5.2,30.2h35.8c0.7-5.1-5.3-17.3-14.7-19.9
		c2.1-21.9,6.8-54.9,6.4-65.8C174.4,184.1,134.6,183,134.1,213L134.1,213z"
              />
              <path
                fill="#333333"
                d="M114.9,162.5l-1.5,16.8c33.3,19.2,79.8,15.5,104.2,4.7l1.7-16.4C219.4,167.6,155.8,183.9,114.9,162.5
		L114.9,162.5z"
              />
              <path
                fill="#212121"
                d="M114.9,162.5l-1.5,16.8c6.3,3.6,13,6.4,19.9,8.5c-5.4-6.2-7.1-13.5-7-20.5
		C122.4,166,118.6,164.4,114.9,162.5z"
              />
              <path
                fill="#212121"
                d="M114.9,162.5l-0.8,8.9c1.1,0.5,2.3,1,3.5,1.5c43.4,18.4,83.3,6.7,101.3-0.6l0.5-4.7
		C219.4,167.6,155.8,183.9,114.9,162.5L114.9,162.5z"
              />
              <path
                fill="#212121"
                d="M114.9,162.5l-0.8,8.9c1.1,0.5,2.3,1,3.5,1.5c3.3,1.4,6.5,2.6,9.8,3.6c-0.8-3.1-1.2-6.2-1.1-9.4
		C122.4,166,118.5,164.4,114.9,162.5L114.9,162.5z"
              />
              <path
                fill="#5C291A"
                d="M276.1,89.3c0.7-0.2,1-1,0.8-1.6c-0.2-0.7-1-1-1.6-0.8l0,0l-15.7,4.8c-0.7,0.2-1,1-0.8,1.6s1,1,1.6,0.8
		L276.1,89.3L276.1,89.3z"
              />
              <path
                fill="#5C291A"
                d="M278.8,101.3c0.7-0.1,1.2-0.8,1.1-1.5c-0.1-0.7-0.8-1.2-1.5-1.1l-16.4,2c-0.7,0.1-1.2,0.8-1.1,1.5
		c0.1,0.7,0.8,1.2,1.5,1.1L278.8,101.3z"
              />
              <path
                fill="#5C291A"
                d="M277.5,113.8c0.7,0.2,1,1,0.8,1.6c-0.2,0.7-1,1-1.6,0.8l-15.7-4.8c-0.7-0.2-1-1-0.8-1.6
		c0.2-0.7,1-1,1.6-0.8l0,0L277.5,113.8z"
              />
              <path
                fill="#C46818"
                d="M145.6,45.6c0,0-47.2-19.3-57.5-21.5s-9.3,36.6-0.3,76.2C96.7,139.6,145.6,45.6,145.6,45.6z"
              />
              <path
                fill="#FFC491"
                d="M141.1,56.1c0,0-41-16.7-50-18.7s-8.1,31.8-0.3,66.1C98.7,137.7,141.1,56.1,141.1,56.1z"
              />
              <path
                fill="#C46818"
                d="M200.3,41.7c0,0,33.7-31.3,41.5-36.4c7.8-5.1,15,31.5,16,70.9C258.8,115.6,200.3,41.7,200.3,41.7z"
              />
              <path
                fill="#FFC491"
                d="M213.7,46.8c0,0,24-28.8,29.5-33.7c5.5-4.9,10.6,23.7,11.2,55.3C255.1,99.9,213.7,46.8,213.7,46.8
		L213.7,46.8z"
              />
              <path
                fill="#E89954"
                d="M181.8,33.2c56,0,132.5,91.4,41.9,134.3C171,192.5,91.4,179.7,89,128.9C87.2,90,125.8,33.2,181.8,33.2z"
              />
              <path
                fill="#C46818"
                d="M204.4,37.5c0.3,2-8.7,29.1,10.6,73.5c-10.7,12.3-11.5,6.3-18.2,4.7c-4.3-21.1-9.8-48.4-55.6-71.9
		C157.2,33.9,186.6,29,204.4,37.5z"
              />
              <path
                className={styles.rightLip}
                fill="#5C291A"
                d="M208,120.7c0-0.5,0.3-0.9,0.8-0.9c0.5,0,0.9,0.3,0.9,0.8l0,0c0,0.1,0.9,8.7,0.1,10.5
		c-1.5,3.4-4.3,6-7.8,7.3c-2,0.8-4.1,1.1-6.3,1.1c-2.1,0-4.2-0.4-6.1-1.3h-0.1c-2.7-1.1-4.8-3.2-5.9-5.9c-0.2-0.4,0-0.9,0.5-1.1
		c0.4-0.2,0.9,0,1.1,0.5c0.9,2.3,2.7,4.1,5,5l0,0c1.7,0.7,3.5,1.1,5.4,1.1c1.9,0,3.8-0.3,5.6-1c3-1.1,5.5-3.3,6.8-6.3
		C208.8,129,208,120.7,208,120.7L208,120.7z"
              />
              <path
                className={styles.leftLip}
                fill="#5C291A"
                d="M208.6,130.7c-0.1-0.4,0.1-0.9,0.5-1c0.4-0.1,0.9,0.1,1,0.5c0.5,1.9,1.9,3.3,3.7,3.9
		c2.5,0.8,5.3,0.3,7.4-1.4c2.3-1.7,4-4.7,4.1-9.2c0-0.5,0.4-0.8,0.8-0.8c0.4,0,0.8,0.4,0.8,0.8c-0.1,5-2.1,8.5-4.8,10.5
		c-1.3,1-2.8,1.6-4.5,1.9c-1.5,0.2-3.1,0.1-4.5-0.4C210.9,134.9,209.2,133,208.6,130.7L208.6,130.7z"
              />
              <path
                fill="#B93C3B"
                d="M206,110.5c0,0-13.5,2.9-8.4,8.2c5.2,5.3,10.4,6.5,14.1,3C215.5,118.2,221.9,107.5,206,110.5z"
              />
              <path
                fill="#A83836"
                d="M198.4,113.5c-1.9,1.4-2.9,3.1-0.7,5.2c5.2,5.3,10.4,6.5,14.1,3c2.6-2.5,6.5-8.4,3.3-10.7
		c0.7,3.7-2.4,8.7-8.6,8.2C199.4,118.6,198.4,115.5,198.4,113.5z"
              />
              <path
                fill="#5C291A"
                d="M107.6,124.4c-0.7-0.1-1.2-0.8-1.1-1.5c0.1-0.7,0.8-1.2,1.5-1.1l16.4,1.8c0.7,0.1,1.2,0.8,1.1,1.5
		c-0.1,0.7-0.8,1.2-1.5,1.1l0,0L107.6,124.4z"
              />
              <path
                fill="#5C291A"
                d="M107.3,136.6c-0.7,0.1-1.3-0.5-1.4-1.2c-0.1-0.7,0.5-1.3,1.2-1.4l16.5-1c0.7-0.1,1.3,0.5,1.4,1.2
		c0.1,0.7-0.5,1.3-1.2,1.4L107.3,136.6z"
              />
              <path
                fill="#5C291A"
                d="M110.9,148.7c-0.6,0.3-0.9,1.1-0.5,1.7c0.3,0.6,1.1,0.9,1.7,0.5l14.6-7.6c0.6-0.3,0.9-1.1,0.6-1.7
		c-0.3-0.6-1.1-0.9-1.7-0.6c0,0,0,0,0,0L110.9,148.7z"
              />
              <path d="M162.1,112.3c6.5,10.3,15.7-2.3,11-11.2c-3.5-6.6-10-4.2-12.2,1.3C159.7,105.7,160.1,109.3,162.1,112.3L162.1,112.3z" />
              <path
                fill="#5C291A"
                d="M163.4,79.2c0,0-10.7,9.5-9.4,11.9c1.4,2.4,16.5-3.5,18.6-8.2C174.6,78.3,168.5,76.1,163.4,79.2z"
              />
              <path d="M227.6,100.9c8.5,8.6,14.9-5.5,8.5-13.3c-4.8-5.7-10.6-1.9-11.6,3.8C223.9,94.9,225.1,98.5,227.6,100.9z" />
              <path
                fill="#5C291A"
                d="M225.7,66.5c0,0,13.5,5.1,13,7.8s-16.7,2.6-20.3-1C214.9,69.6,219.8,65.3,225.7,66.5z"
              />
              <path
                fill="#333333"
                d="M208.7,183.5l14.8,47.6l-14.6,22.7l-17.4-20.3l10.7-51.7L208.7,183.5z"
              />
              <path
                fill="#212121"
                d="M215.5,243.7l-6.5,10.2l-17.4-20.3l9.1-44c0.4,0.1,0.6,0.2,0.6,0.2l-1.9,39.6
		C199.4,229.5,205.8,243.3,215.5,243.7L215.5,243.7z"
              />
            </g>
            <g id="Eyes">
              <circle
                ref={leftEyeRef}
                transform-origin="168 106"
                transform={`rotate(${leftEyeAngle})`}
                fill="#FFFFFF"
                cx="172"
                cy="106"
                r="2"
              />

              <circle
                ref={rightEyeRef}
                transform-origin="232 94"
                transform={`rotate(${rightEyeAngle})`}
                fill="#FFFFFF"
                cx="237"
                cy="94"
                r="2"
              />
            </g>
          </svg>
        </div>
        <div className={styles.textContainer}>
          <p className={styles.headsUpText}>Heads up!</p>
          <p className={styles.warningText}>
            This site is not the real Instagram and merely a visual replica,
            made entirely for educational purposes.
          </p>
          <p className={styles.googleText}>
            <strong>Google Safe Browsing</strong> doesn’t like replicas of
            popular sites. So I made this warning to avoid confusion.
          </p>
          <button
            className={styles.continueButton}
            onClick={() => {
              window.document.cookie = 'hasSeenWarning=true';
              setIsWarned(false);
            }}
          >
            Continue
          </button>
        </div>
      </div>
    )
  );
}
